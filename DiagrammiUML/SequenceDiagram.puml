@startuml

entity      Entity      as Foo4
database    Database    as Foo5

actor Utente as u
participant Game as ga

/'--------------------AVVIO DEL GIOCO'/
create GameEngine
ga -> GameEngine : new GameEngine()
create Grafica
ga -> Grafica : new Grafica()
/'-----CREAZIONE MENU INIZIALE'/
create Menu_iniziale
Grafica -> Menu_iniziale : new Menu_iniziale()
Grafica -> Menu_iniziale : toString()
Menu_iniziale -> Grafica : vociDelMenu["voce1..."]
/'-----CREAZIONE VERIFY_COMMAND'/
create VerifyCommand
Grafica -> VerifyCommand : new VerifyCommand()

/'****************************COMANDO START INVIATO DA UTENTE****************************'/
u -> Grafica : comando["start"]
Grafica -> VerifyCommand : checkSintax(comando)
VerifyCommand -> GameEngine : runSetup()
GameEngine -> Grafica : clearMenu()
Grafica -> Menu_iniziale : delete()
destroy Menu_iniziale  /'fine della vita del menu_iniziale'/
/'-----CREAZIONE MAPPA_GRAF'/
create MappaGraf
GameEngine -> MappaGraf : new MappaGraf()
GameEngine -> Grafica : getUserName()
Grafica -> GameEngine : name["giocatore1"]
/'-----CREAZIONE PLAYER'/
create Player
GameEngine -> Player : new Player(name["giocatore1"])
GameEngine -> Grafica: setPosition(Player.getPos())

/'****************************COMANDO MOVE <DIRECTION> INVIATO DA UTENTE****************************'/
u -> Grafica : comando["move nord"]
Grafica -> VerifyCommand : checkSintax(comando) 
VerifyCommand -> GameEngine : nord()
GameEngine -> MappaGraf : getNode(Player.getPos(), DIRECTION.NORD)
MappaGraf -> GameEngine : restituisce node
GameEngine -> Player : setPos(node.getPos())
GameEngine -> Grafica : setPosition(player.getPos())


@enduml
